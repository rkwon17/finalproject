library(magrittr)
library(texreg)
library(tidycensus)
library(ggplot2)
library(ggmap)
library(stringr)
library(tidyverse)
vars2010 <- NA
for (i in 1:17) {
if (i <10){
vars2010[i] <- paste( 'P00500', i, sep = "")}
else{vars2010[i] <- paste( 'P0050', i, sep = "")}
}
# Erin testing 2000 white-only data
test_vars2000 <- c('P003003', 'P003004', 'P003001')
countylist <- c('Suffolk', 'Middlesex')
test_cendat2000 <- get_decennial(geography = "tract", variables = test_vars2000, year = 2000, geometry = TRUE, output = 'wide', shift_geo = FALSE, summary_var = 'P001001', state= 'Massachusetts', county = countylist)
#OMG A MAP WITH REAL COLORS YAY (fyi: this is very preliminary. doesn't even get close to what we're actually aiming for. but it's a map!)
ggplot(test_cendat2000, aes(fill = P003003, color = P003003)) +
geom_sf() + # add a spatial geom
coord_sf(crs = 26914)
#rachel testing 2010 white-only data - HI THIS DOESN'T WORK IDK WHY SOS
test_vars2010 <- c('P0010003','P0010001') #white alone, population total
test_cendat2010 <- get_decennial(geography = "tract", variables = test_vars2010, year = 2010, geometry = TRUE, output = 'wide', shift_geo = FALSE, summary_var = 'P001001', state= 'Massachusetts', county = 'Suffolk')
#rachel testing 1990 white only data
test_vars1990 <- c('P0070001')
test_cendat1990 <- get_decennial(geography = "tract", variables = test_vars1990, year = 1990, geometry = TRUE, output = 'wide', shift_geo = FALSE, summary_var = 'P0010001', state= 'Massachusetts', county = '01')
ggplot(test_cendat1990, aes(fill = P0070001, color = P0070001)) +
geom_sf()
# 1990 - this seems to be working!
test_vars1990 <- c('P0070001')
countylist <- c('Suffolk', 'Middlesex')
test_cendat1990 <- get_decennial(geography = "tract", variables = test_vars1990, year = 1990, geometry = TRUE, output = 'wide', shift_geo = FALSE, summary_var = 'P0010001', state= 'Massachusetts', county = countylist)
ggplot(test_cendat1990, aes(fill = P0070001, color = P0070001)) +
geom_sf()
# 2000 - also seems to be working!
test_vars2000 <- c('P003003', 'P003004', 'P003001')
countylist <- c('Suffolk', 'Middlesex', 'Norfolk')
test_cendat2000 <- get_decennial(geography = "tract", variables = test_vars2000, year = 2000, geometry = TRUE, output = 'wide', shift_geo = FALSE, summary_var = 'P001001', state= 'Massachusetts', county = countylist)
#OMG A MAP WITH REAL COLORS YAY
#(fyi: this is very preliminary. doesn't even get close to what we're actually aiming for. but it's a map!)
ggplot(test_cendat2000, aes(fill = P003003, color = P003003)) +
geom_sf() +
coord_sf(crs = 26914)
# attempting a full MA map with only the relevant stuff filled in
test_cendat2000_empty <- get_decennial(geography = "tract", variables = test_vars2000, year = 2000, geometry = TRUE, output = 'wide', shift_geo = FALSE, summary_var = 'P001001', state= 'Massachusetts')
head(test_cendat2000_empty)
test_cendat2000_empty$NAME
relevant_tracts_2000 <- test_cendat2000$NAME
relevant_tracts_2000
